
CERT = <<eos
-----BEGIN CERTIFICATE-----
MIIF0zCCBLugAwIBAgIHFEQ62Bgd/zANBgkqhkiG9w0BAQUFADCBvzELMAkGA1UE
BhMCREUxGzAZBgNVBAgTEkJhZGVuLVd1ZXJ0dGVtYmVyZzESMBAGA1UEBxMJS2Fy
bHNydWhlMSowKAYDVQQKEyFLYXJsc3J1aGUgSW5zdGl0dXRlIG9mIFRlY2hub2xv
Z3kxJzAlBgNVBAsTHlN0ZWluYnVjaCBDZW50cmUgZm9yIENvbXB1dGluZzEPMA0G
A1UEAxMGS0lULUNBMRkwFwYJKoZIhvcNAQkBFgpjYUBraXQuZWR1MB4XDTEyMDgx
MDA3NTAzM1oXDTE1MDgxMDA3NTAzM1owgYQxCzAJBgNVBAYTAkRFMRswGQYDVQQI
ExJCYWRlbi1XdWVydHRlbWJlcmcxEjAQBgNVBAcTCUthcmxzcnVoZTEqMCgGA1UE
ChMhS2FybHNydWhlIEluc3RpdHV0ZSBvZiBUZWNobm9sb2d5MRgwFgYDVQQDEw9p
ZHAuc2NjLmtpdC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDD
HcGGowpLtsHCqYcecx7WpHHnzd0RLJgUK74CkF5o18ZR6qe6Y/Ok0byxAYtwLLig
PZqZvSctPGmBB+xIptl59ROz0y/iX1rJ8YojPxUZPw8O78vEuVy+auiwkxHs84mn
mdAxObiCrePfysL9fOBYsY07Byvn/zxZfWFrFe+Ijl6kbLDpfL7Bl1/h6oL17ywF
MlDa6PvZvLbq1JlOdrXoq3lPvF40+D15KBI61xooauMtkJhapDi842Dk6EVQuy+M
fiEe3hwMy6k1N4KEkOmRsuFg3McpoTRrS6cScwaLZxrWPgG32gpvfM5WJsLfSnHq
MT6UKugmWNSM/w+HEdwrAgMBAAGjggILMIICBzAvBgNVHSAEKDAmMBEGDysGAQQB
ga0hgiwBAQQCAzARBg8rBgEEAYGtIYIsAgEEAgMwCQYDVR0TBAIwADALBgNVHQ8E
BAMCBeAwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMB0GA1UdDgQWBBSJ
mWca+U0inH4Ylhqt3Txayi6rmzAfBgNVHSMEGDAWgBQfdGX0mh169jHp32EbcysN
bdAzSTAaBgNVHREEEzARgg9pZHAuc2NjLmtpdC5lZHUwdwYDVR0fBHAwbjA1oDOg
MYYvaHR0cDovL2NkcDEucGNhLmRmbi5kZS9raXQtY2EvcHViL2NybC9jYWNybC5j
cmwwNaAzoDGGL2h0dHA6Ly9jZHAyLnBjYS5kZm4uZGUva2l0LWNhL3B1Yi9jcmwv
Y2FjcmwuY3JsMIHHBggrBgEFBQcBAQSBujCBtzAzBggrBgEFBQcwAYYnaHR0cDov
L29jc3AucGNhLmRmbi5kZS9PQ1NQLVNlcnZlci9PQ1NQMD8GCCsGAQUFBzAChjNo
dHRwOi8vY2RwMS5wY2EuZGZuLmRlL2tpdC1jYS9wdWIvY2FjZXJ0L2NhY2VydC5j
cnQwPwYIKwYBBQUHMAKGM2h0dHA6Ly9jZHAyLnBjYS5kZm4uZGUva2l0LWNhL3B1
Yi9jYWNlcnQvY2FjZXJ0LmNydDANBgkqhkiG9w0BAQUFAAOCAQEAFngSGNNctEwO
JEE88p/7h80qo7dcB7Xu4xAQMvBj3YzuwuT/h/ufgMheWxYxArwP87NWmquMYyhw
yFO0dOlk94r991S7BGpwr5ULo4nltQkWOVkuFK/tooHgTfcAMW3Jg9GDjyYXQOQr
kGlg4rrkKm6hyRlSxeDBrkjZOFgNL/nExWwW1bhM4wziNVppNhesvHgnvZOtf26x
ixMFJ/A/tuJKo1upH0VuEK8iMbYkZusbevLABorQS02C2c/j5JD5Z0M8peykc4xz
ArKnesWTUvcbcwMLgZhl8GnJZGr8UWkSpPH/IeTn3PTDjkf4M6+Sw6yopkcM4Ci8
zea6MPIosg==
-----END CERTIFICATE-----
eos

# CERT2 = <<eos
# -----BEGIN CERTIFICATE-----
# MIICizCCAfQCCQCY8tKaMc0BMjANBgkqhkiG9w0BAQUFADCBiTELMAkGA1UEBhMC
# Tk8xEjAQBgNVBAgTCVRyb25kaGVpbTEQMA4GA1UEChMHVU5JTkVUVDEOMAwGA1UE
# CxMFRmVpZGUxGTAXBgNVBAMTEG9wZW5pZHAuZmVpZGUubm8xKTAnBgkqhkiG9w0B
# CQEWGmFuZHJlYXMuc29sYmVyZ0B1bmluZXR0Lm5vMB4XDTA4MDUwODA5MjI0OFoX
# DTM1MDkyMzA5MjI0OFowgYkxCzAJBgNVBAYTAk5PMRIwEAYDVQQIEwlUcm9uZGhl
# aW0xEDAOBgNVBAoTB1VOSU5FVFQxDjAMBgNVBAsTBUZlaWRlMRkwFwYDVQQDExBv
# cGVuaWRwLmZlaWRlLm5vMSkwJwYJKoZIhvcNAQkBFhphbmRyZWFzLnNvbGJlcmdA
# dW5pbmV0dC5ubzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAt8jLoqI1VTlx
# AZ2axiDIThWcAOXdu8KkVUWaN/SooO9O0QQ7KRUjSGKN9JK65AFRDXQkWPAu4Hln
# O4noYlFSLnYyDxI66LCr71x4lgFJjqLeAvB/GqBqFfIZ3YK/NrhnUqFwZu63nLrZ
# jcUZxNaPjOOSRSDaXpv1kb5k3jOiSGECAwEAATANBgkqhkiG9w0BAQUFAAOBgQBQ
# Yj4cAafWaYfjBU2zi1ElwStIaJ5nyp/s/8B8SAPK2T79McMyccP3wSW13LHkmM1j
# wKe3ACFXBvqGQN0IbcH49hu0FKhYFM/GPDJcIHFBsiyMBXChpye9vBaTNEBCtU3K
# jjyG0hRT2mAQ9h+bkPmOvlEo/aH0xR68Z9hw4PF13w==
# -----END CERTIFICATE-----
# eos


# CERT3 = <<eos
# -----BEGIN CERTIFICATE-----
# MIIErDCCA5SgAwIBAgIOAUfBVeBeAAAAAGGbbqQwDQYJKoZIhvcNAQEFBQAwgZAx
# KDAmBgNVBAMMH1NlbGZTaWduZWRDZXJ0XzEwQXVnMjAxNF8xOTEyMTYxGDAWBgNV
# BAsMDzAwRDIwMDAwMDAwbzBYdzEXMBUGA1UECgwOU2FsZXNmb3JjZS5jb20xFjAU
# BgNVBAcMDVNhbiBGcmFuY2lzY28xCzAJBgNVBAgMAkNBMQwwCgYDVQQGEwNVU0Ew
# HhcNMTQwODEwMTkxMjE2WhcNMTYwODA5MTkxMjE2WjCBkDEoMCYGA1UEAwwfU2Vs
# ZlNpZ25lZENlcnRfMTBBdWcyMDE0XzE5MTIxNjEYMBYGA1UECwwPMDBEMjAwMDAw
# MDBvMFh3MRcwFQYDVQQKDA5TYWxlc2ZvcmNlLmNvbTEWMBQGA1UEBwwNU2FuIEZy
# YW5jaXNjbzELMAkGA1UECAwCQ0ExDDAKBgNVBAYTA1VTQTCCASIwDQYJKoZIhvcN
# AQEBBQADggEPADCCAQoCggEBAIQlMCNNeh+eJiQejqrut6QJVOnBlCDSsaoae640
# chmQBjnCvuDBniCX0sJcbryB9jEvgtT4NnH8jJvrQgZkoOeK73CpGd9tt2vjhcZq
# 2Dp5TgasDEG9wXhIw6SKJDmQFY2v4njLpO0JKF7opyqI55qy55VDC/ssw5JU3cSr
# K3Kb/Z+JNqNlmfBsNnJwPCBfufqGTwzWGXqrtsfaWesWFYp5cNJGqYDYqXk0/71A
# Bd2KbOLN9NMNs9ESduQ6QFJNOZ+sc5/EfYEHYLZTScYzDGmtZSXC8Dpuk+HpeerC
# vyNVKmWipvAMEkzSQfTTa3iVU7ztwD0bxKOD5AjNSqz09KcCAwEAAaOCAQAwgf0w
# HQYDVR0OBBYEFN/SPMsJlFPSDRYfUJA52tY/N3SYMIHKBgNVHSMEgcIwgb+AFN/S
# PMsJlFPSDRYfUJA52tY/N3SYoYGWpIGTMIGQMSgwJgYDVQQDDB9TZWxmU2lnbmVk
# Q2VydF8xMEF1ZzIwMTRfMTkxMjE2MRgwFgYDVQQLDA8wMEQyMDAwMDAwMG8wWHcx
# FzAVBgNVBAoMDlNhbGVzZm9yY2UuY29tMRYwFAYDVQQHDA1TYW4gRnJhbmNpc2Nv
# MQswCQYDVQQIDAJDQTEMMAoGA1UEBhMDVVNBgg4BR8FV4H8AAAAAYZtupDAPBgNV
# HRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQAhxUszvyT8uK4HvmEhkKPD
# P4nUHHrNOSjgtY3caZkZggQohzW5Lhu/X9/NAn7oDEjeQzURbN/JC90gjplI631k
# NZlwbErbcR/t50zqenRZSS5bKocy09uBeeIQp5uI6ybJGM9Z5Y/CpS9LMhtkW496
# I5dnwZ64Z++Bz7WUNMpr9Hgwd0ubWLNRg96PdM5mFdj8UrxfWG8bFwizJjmJA1cF
# 8f9mYMp1WPNN8xS3aNbGImpFr3+jtAY/op4McRpGisi0D04VWN8qBbbD3Ugdz8/N
# Ovhz1jTXSVTE4aoj0xG4Eng67wfHC+lsO76IYoHTX24HwSCwrsvRFjzVyhcUxElA
# -----END CERTIFICATE-----
# eos

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :saml,
    :assertion_consumer_service_url     => "http://www.kithub.de/auth/saml/callback",
    :issuer                             => "http://www.kithub.de/auth/saml/metadata",
    :idp_sso_target_url                 => "https://idp.scc.kit.edu/idp/profile/SAML2/Redirect/SSO",
    :idp_cert                           => CERT
end


# Rails.application.config.middleware.use OmniAuth::Builder do
#   provider :saml,
#     :assertion_consumer_service_url     => "http://286eb324.ngrok.com/auth/saml/callback",
#     :issuer                             => "http://www.kithub.de",
#     :idp_sso_target_url                 => "https://kitkitkit-dev-ed.my.salesforce.com/idp/endpoint/HttpRedirect",
#     # :idp_sso_target_url_runtime_params  => {:original_request_param => :mapped_idp_param},
#     :idp_cert                           => CERT3
#     # :idp_cert_fingerprint               => "E7:91:B2:E1:...",
#     # :name_identifier_format             => "urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"
# end


# Rails.application.config.middleware.use OmniAuth::Builder do
#   provider :saml,
#     :assertion_consumer_service_url     => "http://286eb324.ngrok.com/saml",
#     :issuer                             => "http://www.kithub.de",
#     :idp_sso_target_url                 => "https://openidp.feide.no/simplesaml/saml2/idp/SSOService.php",
#     # :idp_sso_target_url_runtime_params  => {:original_request_param => :mapped_idp_param},
#     :idp_cert                           => CERT2
#     # :idp_cert_fingerprint               => "E7:91:B2:E1:...",
#     # :name_identifier_format             => "urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"
# end
